{% extends "blog_QA/base.html" %}

{% block content %}

  <ul>
    <li>
      <p id="topic"><b>{{ topic }}</b> ({{ topic.date_added|date:'M d, Y H:i' }})</p>
      <p>{{ topic.body_text|safe }} </p>
    </li>
  </ul>
  <br>

  <p>Entries:</p>
  <p>
    <form action="#add_entry">
      <button name="submit">Add new entry</button>
    </form>
  </p>
  <ul>
      {% for entry in entries %}
        <li>
            <p><b>{{ entry.owner }}</b> ({{ entry.date_added|date:'M d, Y H:i' }})</p>
            {% if user == entry.owner %}
              <a href="{% url 'blog_QA:edit_entry' entry.id%}">Edit Entry</a>
            {% endif %}
            <p>{{ entry.text|safe }}</p><br>
        </li>
      {% empty %}
      <li>There are no entries for this topic yet.</li>
      {% endfor %}
  </ul>
  
  <p id="add_entry">Add a new entry:</p>

  <form action="{% url 'blog_QA:entries' topic.id%}" method="POST">
      {% csrf_token %}
      {{ form.media }}
      {{ form.as_p }}
      <button name="submit">Add entry</button>
  </form>

{% endblock content %}